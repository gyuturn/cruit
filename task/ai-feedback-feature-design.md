# AI 학습 피드백 기능 설계서

## 개요
사용자가 "AI에게 학습후 재추천" 버튼 클릭 시, 별점의 이유를 직접 입력받아 AI 프롬프트에 반영하는 기능

---

## 현재 문제점

### AS-IS (현재 상태)
```
사용자: ★★★★★ (5점)
AI가 아는 정보: "이 공고에 5점을 줬다"
AI가 모르는 정보: "왜 5점을 줬는지"
```

- AI는 별점 숫자만 알고, 이유를 모름
- "연봉이 높아서", "재택근무라서", "기술스택이 맞아서" 등 구체적 선호 파악 불가
- 단순히 "높은 점수 공고와 비슷한 것" 추천 → 정확도 한계

### TO-BE (개선 후)
```
사용자: ★★★★★ (5점)
사용자 의견: "재택근무 가능하고 React 기술스택이라서 좋았어요"
AI가 아는 정보: "5점 + 재택근무 선호 + React 기술스택 선호"
```

- AI가 사용자의 구체적인 선호도 파악
- "재택근무 가능한 React 포지션" 우선 추천 가능

---

## 기대 효과

### 1. 추천 정확도 향상
| 구분 | 현재 | 개선 후 |
|------|------|---------|
| 선호 파악 | 점수 기반 유사도 | 의도 기반 매칭 |
| 추천 근거 | "비슷한 회사 규모" | "재택근무 + React" |
| 정확도 | 60-70% (추정) | 80-90% (예상) |

**예시:**
- 현재: 삼성전자에 5점 → "대기업 추천"
- 개선: 삼성전자에 5점 + "복지가 좋아서" → "복지 좋은 회사 추천"

### 2. 사용자 만족도 증가
- 자신의 의견이 반영된다는 느낌 → 서비스 신뢰도 상승
- 더 관련성 높은 추천 → 재방문율 증가
- "AI가 내 말을 이해한다" → 사용자 경험 개선

### 3. 개인화 수준 향상
```
기존: 프로필 기반 일반 추천
     └── 경력, 학력, 자격증 매칭

개선: 프로필 + 선호도 기반 맞춤 추천
     └── 경력, 학력, 자격증 매칭
     └── 근무형태 선호 (재택/출퇴근)
     └── 회사 규모 선호 (스타트업/대기업)
     └── 기술스택 선호
     └── 위치 선호
     └── 연봉 수준 선호
```

### 4. AI 프롬프트 품질 향상
**현재 프롬프트:**
```
### 선호하는 공고 (4-5점)
- 삼성전자 - 프론트엔드 개발자 (5점)
- 네이버 - React 개발자 (4점)

위 피드백을 참고하여 추천하세요.
```

**개선된 프롬프트:**
```
### 선호하는 공고 (4-5점)
- 삼성전자 - 프론트엔드 개발자 (5점)
  └ 사용자 의견: "복지가 좋고 안정적인 대기업이라서"
- 네이버 - React 개발자 (4점)
  └ 사용자 의견: "React 기술스택이 맞고 재택근무 가능해서"

### 비선호 공고 (1-2점)
- 스타트업A - 풀스택 개발자 (2점)
  └ 사용자 의견: "야근이 많을 것 같고 연봉이 낮아서"

## 분석된 사용자 선호도
- 선호: 대기업, 좋은 복지, React, 재택근무
- 비선호: 야근 많은 곳, 낮은 연봉

위 선호도를 반영하여 추천 점수를 조정하세요.
```

### 5. 데이터 자산 축적
- 사용자 피드백 데이터 축적 → 향후 ML 모델 학습 데이터로 활용 가능
- 공고별 선호/비선호 이유 분석 → 서비스 개선 인사이트
- 사용자 세그먼트별 선호 패턴 파악

### 6. 차별화된 서비스 제공
| 경쟁 서비스 | 우리 서비스 |
|-------------|-------------|
| 클릭 기반 추천 | 의견 기반 추천 |
| "이 공고를 본 사람들이..." | "당신이 원하는 조건에 맞는..." |
| 블랙박스 추천 | 투명한 추천 이유 제공 |

---

## UI/UX 설계

### 피드백 입력 모달
```
┌─────────────────────────────────────────────────┐
│  🧠 AI 학습을 위한 피드백                    [X] │
├─────────────────────────────────────────────────┤
│                                                 │
│  별점을 남긴 이유를 알려주세요.                  │
│  AI가 더 정확한 추천을 해드릴 수 있어요!         │
│                                                 │
│  ┌─────────────────────────────────────────┐   │
│  │ 예: 재택근무 가능, React 기술스택,       │   │
│  │     연봉이 높음, 복지가 좋음 등          │   │
│  │                                         │   │
│  │                                         │   │
│  └─────────────────────────────────────────┘   │
│                                                 │
│  💡 빠른 선택:                                  │
│  [재택근무] [연봉] [기술스택] [복지] [위치]      │
│  [회사규모] [성장가능성] [워라밸]                │
│                                                 │
│              [취소]  [AI 학습 시작]              │
└─────────────────────────────────────────────────┘
```

### 빠른 선택 태그
사용자가 자주 언급하는 키워드를 태그로 제공:
- 근무형태: 재택근무, 유연근무, 주4일
- 보상: 높은연봉, 스톡옵션, 성과급
- 복지: 좋은복지, 식대지원, 자기개발비
- 환경: 워라밸, 야근없음, 자유로운분위기
- 성장: 성장가능성, 교육지원, 커리어개발
- 기술: 최신기술스택, 관심기술사용

---

## 데이터 구조

### 확장된 RatingWithJobInfo
```typescript
export interface RatingWithJobInfo {
  jobId: string;
  rating: number;
  jobTitle: string;
  company: string;
  skills: string[];
  experienceLevel: string;
  // 새로 추가
  userFeedback?: string;        // 사용자 의견 (자유 입력)
  selectedTags?: string[];      // 선택한 빠른 태그
}
```

### 전체 피드백 요약
```typescript
export interface UserPreferenceSummary {
  positiveKeywords: string[];   // 선호 키워드
  negativeKeywords: string[];   // 비선호 키워드
  feedbackText: string;         // 종합 의견
}
```

---

## 프롬프트 개선안

```typescript
function buildEnhancedRatingContext(
  ratings: RatingWithJobInfo[],
  userFeedback: string
): string {
  const highRated = ratings.filter(r => r.rating >= 4);
  const lowRated = ratings.filter(r => r.rating <= 2);

  let context = `
## 사용자 피드백 분석

### 종합 의견
${userFeedback}

### 선호하는 공고 (4-5점)
${highRated.map(r => `- ${r.company} - ${r.jobTitle} (${r.rating}점)
  ${r.userFeedback ? `└ 이유: "${r.userFeedback}"` : ''}`).join('\n')}

### 비선호 공고 (1-2점)
${lowRated.map(r => `- ${r.company} - ${r.jobTitle} (${r.rating}점)
  ${r.userFeedback ? `└ 이유: "${r.userFeedback}"` : ''}`).join('\n')}

**중요**: 위 피드백에서 언급된 키워드(재택근무, 연봉, 기술스택 등)를
분석하여 사용자의 실제 선호도를 파악하고, 새로운 공고 추천 시
해당 선호도를 적극 반영하세요.
`;

  return context;
}
```

---

## 구현 우선순위

### Phase 1: 기본 구현 - **완료**
1. ✅ 피드백 입력 모달 컴포넌트 생성 (`AIFeedbackModal.tsx`)
2. ✅ 사용자 의견 텍스트 입력 기능
3. ✅ AI 프롬프트에 의견 반영 (`buildRatingContext` 함수 개선)
4. ✅ 빠른 선택 태그 추가 (8개 카테고리, 32개 태그)
5. ✅ 선호/비선호 키워드 입력 기능

### Phase 2: UX 개선 (향후)
1. 별점별 개별 피드백 입력 옵션
2. 피드백 히스토리 저장
3. 선택된 태그 기반 자동 추천

### Phase 3: 고도화 (향후)
1. 피드백 키워드 자동 추출
2. 선호도 학습 및 프로필 저장
3. 피드백 분석 대시보드

---

## 예상 효과 수치 (추정)

| 지표 | 현재 | 개선 후 (예상) |
|------|------|----------------|
| 추천 클릭률 | 15% | 25-30% |
| 사용자 만족도 | 3.5/5 | 4.2/5 |
| 재방문율 | 40% | 55-60% |
| 평균 세션 시간 | 3분 | 5분 |

---

## 리스크 및 대응

| 리스크 | 대응 방안 |
|--------|----------|
| 사용자가 피드백 입력을 귀찮아함 | 빠른 태그 선택으로 최소화, 선택사항으로 제공 |
| 피드백 품질이 낮음 | 가이드 문구 제공, 예시 표시 |
| 토큰 사용량 증가 | 피드백 요약 후 전송, 핵심 키워드만 추출 |

---

*작성일: 2026-01-31*
*버전: 1.0*
